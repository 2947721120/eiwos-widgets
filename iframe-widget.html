<link rel="import" href="../polymer/polymer.html">

<dom-module id="init-fiwa">
    <script src="js/bin/fiwa.js"></script>
    <script>
    Polymer({
        is: 'init-fiwa'
    });
    </script>
</dom-module>

<dom-module id="init-fiwa-client">
    <script src="js/bin/fiwa_client.js"></script>
    <script>
    Polymer({
        is: 'init-fiwa-client'
    });
    </script>
</dom-module>

<dom-module id="widget">
    <style>
    .overtumb {
      float: center;
      position: absolute;
      left: 0px;
      top: 0px;
      -webkit-filter: blur(5px);
      -moz-filter: blur(5px);
      -o-filter: blur(5px);
      -ms-filter: blur(5px);
      filter: blur(5px);
    }
    .fadeout{
      animation: fadeout linear 4s;
      animation-iteration-count: 1;
      transform-origin: 50% 50%;
      -webkit-animation: fadeout linear 4s;
      -webkit-animation-iteration-count: 1;
      -webkit-transform-origin: 50% 50%;
      -moz-animation: fadeout linear 4s;
      -moz-animation-iteration-count: 1;
      -moz-transform-origin: 50% 50%;
      -o-animation: fadeout linear 4s;
      -o-animation-iteration-count: 1;
      -o-transform-origin: 50% 50%;
      -ms-animation: fadeout linear 4s;
      -ms-animation-iteration-count: 1;
      -ms-transform-origin: 50% 50%;
    }

    @keyframes fadeout{
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-moz-keyframes fadeout{
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-webkit-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-o-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-ms-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }
    </style>
    <template is="dom-if" if="{{thumbnail}}">
      <img id="i{{id}}" src="{{thumbnail}}" height="{{height}}" width="{{width}}" class="overtumb"></img>
    </template>
    <iframe width="{{width}}" height="{{height}}" id="{{id}}" src="{{src}}" allowtranspatency="true" sandbox="{{perms}}" scrolling="no" style="border:0" onload="{{onload}}"></iframe>
    <script>
    Polymer({
        is: 'widget',
        properties: {
          id: String,
          width: Number,
          height: Number,
          thumbnail: String,
          src: String,
          perms: String,
          force_origin: Boolean,
          backcolor: String,
          backimage: String
        },

        ready: function() {
          if (this.force_origin == true) {
            document.getElementById(this.id).onload = fiwa_Iwa.force_origin(this.id);
          }
          fiwa_Iwa.init_frame(this.id, this.src, this.backcolor, this.backimage);
          fiwa_Fiwa.extraiwa.on_frame_loaded(function() {
            document.getElementById("i" + this.id).className += "fadeout";
          });
        }
    });
    </script>
</dom-module>

<dom-module id="widget-full">
    <style>
    .overtumb {
      float: center;
      position: absolute;
      left: 0px;
      top: 0px;
      -webkit-filter: blur(5px);
      -moz-filter: blur(5px);
      -o-filter: blur(5px);
      -ms-filter: blur(5px);
      filter: blur(5px);
    }
    .fadeout{
      animation: fadeout linear 4s;
      animation-iteration-count: 1;
      transform-origin: 50% 50%;
      -webkit-animation: fadeout linear 4s;
      -webkit-animation-iteration-count: 1;
      -webkit-transform-origin: 50% 50%;
      -moz-animation: fadeout linear 4s;
      -moz-animation-iteration-count: 1;
      -moz-transform-origin: 50% 50%;
      -o-animation: fadeout linear 4s;
      -o-animation-iteration-count: 1;
      -o-transform-origin: 50% 50%;
      -ms-animation: fadeout linear 4s;
      -ms-animation-iteration-count: 1;
      -ms-transform-origin: 50% 50%;
    }

    @keyframes fadeout{
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-moz-keyframes fadeout{
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-webkit-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-o-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }

    @-ms-keyframes fadeout {
      0% {
        opacity:1;
      }
      100% {
        opacity:0;
      }
    }
    </style>
    <template is="dom-if" if="{{thumbnail}}">
      <img src="{{thumbnail}}" height="100vh" width="100vw" class="overtumb"></img>
    </template>
    <iframe width="100vw" height="100vh" id="{{id}}" src="{{src}}" allowtranspatency="true" sandbox="{{perms}}" scrolling="no" style="display: block; border: none; height: 100vh; width: 100vw;" onload="{{onload}}"></iframe>
    <script>
    Polymer({
        is: 'widget-full',
        properties: {
          id: String,
          thumbnail: String,
          src: String,
          perms: String,
          force_origin: Boolean,
          backcolor: String,
          backimage: String
        },

        ready: function() {
          if (this.force_origin == true) {
            document.getElementById(this.id).onload = fiwa_Iwa.force_origin(this.id);
          }
          fiwa_Iwa.init_frame(this.id, this.src, this.backcolor, this.backimage);
          fiwa_Fiwa.extraiwa.on_frame_loaded(function() {
            document.getElementById("i" + this.id).className += "fadeout";
          });
        }
    });
    </script>
</dom-module>
